{"version":3,"sources":["scripts\\index.js"],"names":["$","document","ready","getConfig","url","URL","window","location","href","minNum","maxNum","size","hasBackground","cardBackground","showMode","parseInt","searchParams","get","customBackground","addBackground","bgUrl","css","addCardBackground","i","text","getRandomNum","usedNum","randomNum","Math","round","random","indexOf","push","str","toString","length","split","toggleShape","toggleClass","toggleBetweenNumAndCube","ringNum","cubeNum","$shape","toggleCardJump","num","displayNum","cardNum","showNum","toggleNumJump","showNumByTurn","times","targetNum","originNum","setTimeout","numArr","showNumOnce","clearNum","arr","config","usedArr","pressTimes","preNum","keydown","event","which"],"mappings":"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","file":"scripts.6c23d4b9.map","sourceRoot":"..\\app","sourcesContent":["'use strict';\nimport '../styles/index.scss'\n\n$(document).ready(function () {\n  var getConfig = function () {\n    const url = new URL(window.location.href);\n    var minNum = 0, maxNum = 600, size = 3, hasBackground = false, cardBackground = false, showMode = 0;\n\n    minNum = parseInt(url.searchParams.get(\"min\") || \"1\");\n    maxNum = parseInt(url.searchParams.get(\"max\") || \"600\");\n    size = 3;\n    const customBackground = url.searchParams.get(\"bg_url\");\n    cardBackground = false;\n    showMode = 1;\n    return [minNum, maxNum, size, customBackground, cardBackground, showMode];\n  };\n\n  // Add special background\n  var addBackground = function (bgUrl) {\n    $('body').css('background-image', `url(${bgUrl})`);\n  };\n  var addCardBackground = function () {\n    for (var i = 0; i < 10; i++) {\n      $('#card' + i).css('background', 'url(\\'images/' + i + '.jpg\\') no-repeat center 200px').text('');\n    }\n  };\n\n  // Get a random number, and return as a string array\n  var getRandomNum = function (usedNum, minNum, maxNum, size) {\n    var randomNum = Math.round(Math.random() * (maxNum - minNum + 1) + minNum);\n    while (usedNum.indexOf(randomNum) !== -1)\n      randomNum = Math.round(Math.random() * (maxNum - minNum + 1) + minNum);\n    usedNum.push(randomNum);\n    var str = randomNum.toString();\n    while (str.length < size) str = '0' + str;\n    return str.split('');\n  };\n\n  // Toggle between Cube and Ring\n  var toggleShape = function () {\n    $('#shape').toggleClass('ring').toggleClass('cube');\n  };\n\n  // Open ring and show num, or inversely\n  var toggleBetweenNumAndCube = function (ringNum, cubeNum) {\n    var $shape = $('#shape');\n    $shape.toggleClass('ringShow_' + ringNum).toggleClass('cubeShow_' + cubeNum);\n    $shape.css('-webkit-transform', 'rotateY(' + (-36 * ringNum) + 'deg)');\n  };\n\n  // Let card jump\n  var toggleCardJump = function (num) {\n    $('#card' + num).toggleClass('jump' + num);\n  };\n\n  // Write the number into num block\n  var displayNum = function (cardNum, showNum) {\n    $('#num' + cardNum).text(showNum);\n  };\n\n  // Let the number jump\n  var toggleNumJump = function (num) {\n    $('#num' + num).toggleClass('jumpDown');\n  };\n\n  // The whole lottery process with one num\n  var showNumByTurn = function (times, targetNum, originNum) {\n    toggleShape();\n    toggleBetweenNumAndCube(targetNum, originNum);\n    setTimeout(function () {\n      toggleCardJump(numArr[times]);\n      setTimeout(function () {\n        displayNum(times + 1, numArr[times]);\n        toggleNumJump(times + 1);\n        toggleShape();\n        toggleBetweenNumAndCube(targetNum, targetNum);\n        toggleCardJump(numArr[times]);\n      }, 1100);\n    }, 3300);\n  };\n\n  // Show all num once\n  var showNumOnce = function (numArr) {\n    for (var i = 0; i < numArr.length; i++) {\n      displayNum(i + 1, numArr[i]);\n      toggleNumJump(i + 1);\n    }\n  };\n\n  // clear numbers\n  var clearNum = function (arr) {\n    for (var i = 0; i < arr.length; i++) {\n      toggleNumJump(i + 1);\n      $('#num' + (i + 1)).text('');\n    }\n  };\n\n  // 0: minNum, 1: maxNum, 2: numLength, 3: hasBackground.\n  var config = getConfig();\n\n  // Add background\n  if (config[3])\n    addBackground(config[3]);\n  if (config[4])\n    addCardBackground();\n\n  // Lottery\n  var usedArr = [];\n  var numArr = getRandomNum(usedArr, config[0], config[1], config[2]);\n  var pressTimes = 0, preNum = 0;\n  $('body').keydown(function (event) {\n    if (config[5] === 0) {\n      if (event.which === 32) {\n        if (pressTimes < numArr.length) {\n          showNumByTurn(pressTimes, numArr[pressTimes], preNum);\n          preNum = numArr[pressTimes];\n          pressTimes++;\n        } else {\n          pressTimes = 0;\n          clearNum(numArr);\n          numArr = getRandomNum(usedArr, config[0], config[1], config[2]);\n        }\n      }\n    } else if (config[5] === 1) {\n      if (event.which === 32 && pressTimes === 0) {\n        toggleShape();\n        pressTimes++;\n      } else if (event.which === 32 && pressTimes === 1) {\n        toggleShape();\n        showNumOnce(numArr);\n        pressTimes++;\n      } else if (event.which === 32 && pressTimes === 2) {\n        clearNum(numArr);\n        numArr = getRandomNum(usedArr, config[0], config[1], config[2]);\n        pressTimes = 0;\n      }\n    }\n  })\n});\n"]}